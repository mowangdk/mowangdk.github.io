---
layout: post
title:  "weekly report"
date:   2022-07-24 22:30:08 +0800
categories: weeklyreport
---

# 读书

### linux 设备驱动程序

这一周主要是看了一下字符驱动程序的高级功能,还有竟态相关的内容, 锁其实没有太多的新鲜东西, 因为锁的种类都是固定的, 并且用户态的锁使用跟在驱动中的锁使用其实也都是一样的. 这部分很快的过了. 驱动程序高级功能目前主要分为三个部分, 1. ioctl 的实现, 2. 休眠相关的实现. 3. 阻塞与非阻塞 io. 4. 同步和异步 其中, ioctl其实对现在的我来说没啥太大学习价值. 大概过了一下就直接 pass 了. 休眠是为了后面的阻塞 io 做的铺垫. 后面阻塞和非阻塞这部分之前其实也一直没弄得太明白. 这次正好一起熟悉了,  阻塞和非阻塞之后马上跟上了 poll & select, 这俩都属于非阻塞调用,在我理解应该算是一个例子在讲完之后被提出.

### 操作系统

这周主要是内存相关的部分

1. 在初始化的时候将内存划分成为了三个区域
    - 内核使用区域
    - 缓存区
    - 用户使用的区域
2. 然后就是内存管理, 主要是初始化 mem_map数组
3. 中断处理, 硬件发出中断, 中断处理器收到中断找到对应的值通过 cpu 注脚给 cpu, cpu 根据中断值找中断向量表找到对应的处理程序处理中断
3. tty 显存相关, 内存有部分空间是专门映射给显存的. 往这部分空间写入的值会直接被屏幕读取并显示
4. 操作系统时间的初始化, 是通过读取 CMOS 这个硬件获取的.

# 日常

### bcc 导致的 socket 不可用问题

这个果然遗留下来了, 因为无法排查并且并非一定可以复现,所以暂时搁置了, 用户也没有继续去追了

### 性能优化

本周一直在处理性能优化的问题, 发现 kubelet & external-resizer 会全量 list pod, pvc, pv 的数据. 并且默认会10s 同步一次全量的数据, 这个地方
应该是要搞的. 不过改了之后还可能有坑,哎,头疼. 不过至少可以先把频率降下来
